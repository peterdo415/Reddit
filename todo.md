# TODO: Supabase DB更新を伴う未実装・未完了機能一覧（MVP観点）

## 1. プロフィール機能
- [x] プロフィール画像アップロード
  - [x] Supabase Storage連携（画像選択→アップロード→URL保存）
  - [x] 画像バリデーション（5MB/JPEG/PNG）
  - [x] デフォルトアバター設定

## 2. コミュニティ機能
- [x] コミュニティ画像アップロード
  - [x] Supabase Storage連携（画像選択→アップロード→URL保存）
  - [x] 画像バリデーション（5MB/JPEG/PNG）
  - [x] デフォルト画像設定
- [ ] コミュニティ管理
  - [ ] 編集（名称・説明・画像のDB更新）
  - [ ] 削除（物理削除、ON DELETE CASCADEで配下も物理削除）
  - [ ] 管理者権限チェック（RLS/フロント両方）
- [ ] コミュニティ参加・脱退
  - [ ] user_communitiesテーブルの更新
  - [ ] サイドバー・選択画面での参加状態の即時反映

## 3. 投稿・コメント機能
- [ ] 投稿削除
  - [ ] 物理削除（ON DELETE CASCADEで配下のコメント・投票も物理削除）
  - [ ] 削除権限のチェック（投稿者/管理者のみ）
- [ ] コメント削除
  - [ ] 論理削除（commentsテーブルにis_deletedやdeleted_atカラムを追加し利用）
  - [ ] 削除時は「このコメントは削除されました」と表示し、親・子コメントはそのまま表示
  - [ ] 削除権限のチェック（投稿者/管理者のみ）
- [ ] 投稿・コメント編集（必要なら）

## 4. 投票機能
- [ ] 投票イベントのリアルタイム同期
  - [ ] Supabase Realtime/WebSocketによる投票イベント配信
  - [ ] 投票数の即時反映（全クライアント）

---

**削除方針メモ**
- コミュニティ・投稿は物理削除（ON DELETE CASCADEで配下も物理削除）
- コメントは論理削除（is_deleted等）で「削除済み」表示、スレッド構造は維持
