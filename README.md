# MVPè¦ä»¶å®šç¾©ï¼ˆä¿®æ­£ç‰ˆv2ï¼‰

---

## 1. ãƒ“ã‚¸ãƒã‚¹ã‚´ãƒ¼ãƒ« / KPI

| ç›®æ¨™       | æŒ‡æ¨™         | æ•°å€¤         | å‚™è€ƒ                 |
| -------- | ---------- | ---------- | ------------------ |
| åºƒå‘ŠåŽç›Š     | æœˆæ¬¡å£²ä¸Š       | **Â¥1,000** | ãƒ•ã‚£ãƒ¼ãƒ‰å†…ãƒã‚¤ãƒ†ã‚£ãƒ–åºƒå‘Šï¼ˆCPCï¼‰  |
| åˆ©ç”¨è€…ç²å¾—    | DAU        | **50äºº**    | ãƒªãƒªãƒ¼ã‚¹å¾Œ1ã‹æœˆä»¥å†…         |
| ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ | 1ã‚»ãƒƒã‚·ãƒ§ãƒ³æ»žåœ¨æ™‚é–“ | **5åˆ†ä»¥ä¸Š**   | HotæŠ•ç¨¿ã®é­…åŠ›çš„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ    |
| ã‚¯ãƒªãƒƒã‚¯çŽ‡    | CTR        | **1%**     | Promoted Post ã«å¯¾ã—ã¦ |

---

## 2. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ï¼ˆãƒšãƒ«ã‚½ãƒŠï¼‰

* **å¹´é½¢**: 18â€“35 æ­³ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒã‚¤ãƒ†ã‚£ãƒ–å±¤
* **å‹•æ©Ÿ**: "ä»Š" ç››ã‚Šä¸ŠãŒã‚‹è©±é¡Œã‚’ç›´æ„Ÿçš„ã«çœºã‚ãŸã„ï¼ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§æ°—è»½ã«äº¤æµã—ãŸã„
* **åˆ©ç”¨ç’°å¢ƒ**: ã‚¹ãƒžãƒ›4Gä¸­å¿ƒï¼ˆæ»‘ã‚‰ã‹ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½“é¨“ï¼‰

---

## 3. æ©Ÿèƒ½è¦ä»¶

### 3.1 èªè¨¼æ©Ÿèƒ½

#### 3.1.1 ãƒ­ã‚°ã‚¤ãƒ³æ–¹å¼
* **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼**: Username or email + Passwordï¼ˆbcryptã§ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰
* **OAuthèªè¨¼**: Continue with Google
* **ãƒ­ã‚°ã‚¤ãƒ³å‹•ç·š**: ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸Šã«ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³é…ç½®
* **æ–°è¦ç™»éŒ²**: email + username + password ã§æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

#### 3.1.2 ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
* **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: Supabaseã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’åˆ©ç”¨
* **ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹è¡¨ç¤º**: å³ä¸Šã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒã¾ãŸã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒï¼‰
* **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: ç”»åƒã‚¯ãƒªãƒƒã‚¯ â†’ ç®¡ç†ç”»é¢ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
* **ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œå…¨å‰Šé™¤

#### 3.1.3 æ¨©é™åˆ¶å¾¡
* **ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆæ©Ÿèƒ½**: æŠ•ç¨¿ä½œæˆãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ»æŠ•ç¥¨ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä½œæˆ
* **æœªãƒ­ã‚°ã‚¤ãƒ³**: é–²è¦§ã®ã¿å¯èƒ½

#### 3.1.4 åˆå›žãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é¸æŠžãƒ•ãƒ­ãƒ¼
* **ãƒ­ã‚°ã‚¤ãƒ³å¾Œ**: å¿…é ˆã§ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é¸æŠžç”»é¢ã«é·ç§»
* **é¸æŠžç”»é¢è¡¨ç¤º**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ + è¿½åŠ ä½œæˆæ¸ˆã¿ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’æœ€å¤§20ä»¶è¡¨ç¤º
* **é¸æŠžå¿…é ˆ**: æœ€ä½Ž1ã¤ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’é¸æŠžã—ã¦ã‹ã‚‰ãƒ¡ã‚¤ãƒ³ãƒ•ã‚£ãƒ¼ãƒ‰ã«é€²ã‚ã‚‹
* **å†é¸æŠž**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã„ã¤ã§ã‚‚åˆ¥ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½

---

### 3.2 ãƒ¡ã‚¤ãƒ³ãƒ•ã‚£ãƒ¼ãƒ‰ â€” Reddité¢¨ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼‹Hotã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

| é …ç›®      | ä»•æ§˜                              |
| ------- | ------------------------------- |
| è¡¨ç¤ºæ•°     | åˆæœŸ25ä»¶ï¼‹åºƒå‘Š1â€“2ä»¶                    |
| é…ç½®      | ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã€Hotã‚¹ã‚³ã‚¢é™é †              |
| ç‰¹åˆ¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ | **ä¸Šä½3æŠ•ç¨¿ã«ã€Œç‚Žä¸Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€** - èƒŒæ™¯ã«å‹•çš„ãªç«ã®ç²’å­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰   | ã‚¿ã‚¤ãƒˆãƒ«ã€ç”»åƒï¼ˆã‚ã‚Œã°ï¼‰ã€ã‚¹ã‚³ã‚¢ã€ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã€æ™‚é–“ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è¡¨ç¤º |

---

#### 3.2.1 ã€Œä½•ã“ã‚Œï¼ã€ç‚Žä¸Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

**ä¸Šä½3æŠ•ç¨¿ï¼ˆæœ€ã‚‚HotãªæŠ•ç¨¿ï¼‰**ã«ä»¥ä¸‹ã®è¦–è¦šã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’é©ç”¨ï¼š

* **èƒŒæ™¯**: å¾®ç´°ãªç«ã®ç²’å­ãŒå·¦å³ã‹ã‚‰ã‚†ã‚‰ã‚†ã‚‰ã¨èˆžã„ä¸ŠãŒã‚‹CSS/Canvas ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
* **å¢ƒç•Œç·š**: ã‚ªãƒ¬ãƒ³ã‚¸ã€œèµ¤ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æž ã§å›²ã‚€
* **ã‚¢ã‚¤ã‚³ãƒ³**: æŠ•ç¨¿ã‚¹ã‚³ã‚¢æ¨ªã«å°ã•ãªðŸ”¥ã‚¢ã‚¤ã‚³ãƒ³ã‚’è„ˆå‹•è¡¨ç¤º
* **åŠ¹æžœ**: ã€Œã“ã®æŠ•ç¨¿ã€ä»Šã‚ã¡ã‚ƒãã¡ã‚ƒç‡ƒãˆã¦ã‚‹ï¼ã€ã¨ã„ã†ç›´æ„Ÿçš„ãªç†è§£ã‚’ä¿ƒã™

#### 3.2.2 Hot ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹ã‚¹ã‚³ã‚¢è¨ˆç®—

å„æŠ•ç¨¿ã®**Hot ã‚¹ã‚³ã‚¢**ã¯ Reddit æœ¬å®¶ã¨åŒä¸€ã®è¨ˆç®—å¼ã§å‹•çš„ã«ç®—å‡ºã™ã‚‹ã€‚

```python
import math

def hot_score(ups: int, downs: int, created_utc: int) -> float:
    score = ups - downs
    if score > 0:
        s = 1
    elif score < 0:
        s = -1
    else:
        s = 0
    z = max(abs(score), 1)
    order = math.log10(z)
    seconds = created_utc - 1134028003
    return round(order + (s * (seconds / 45000)), 7)
```

---

### 3.3 æ¤œç´¢æ©Ÿèƒ½

#### 3.3.1 æŠ•ç¨¿æ¤œç´¢
* **é…ç½®**: ãƒ˜ãƒƒãƒ€ãƒ¼ä¸­å¤®ã®æ¤œç´¢ãƒãƒ¼
* **å¯¾è±¡**: `posts.title` ã¨ `posts.body` ã®æ–‡å­—åˆ—éƒ¨åˆ†ä¸€è‡´
* **å®Ÿè£…**: Supabase ã® `ilike` æ¼”ç®—å­ã‚’ä½¿ç”¨ï¼ˆæœ€é€Ÿå®Ÿè£…ï¼‰
* **çµæžœè¡¨ç¤º**: æŠ•ç¨¿ä¸€è¦§å½¢å¼ã€Hoté †ã‚½ãƒ¼ãƒˆ
* **æ¤œç´¢ã‚¯ã‚¨ãƒª**: æ—¥æœ¬èªžãƒ»è‹±èªžå¯¾å¿œã€3æ–‡å­—ä»¥ä¸Šã§æ¤œç´¢å®Ÿè¡Œ

#### 3.3.2 ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ¤œç´¢
* **é…ç½®**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é¸æŠžç”»é¢ã¨ã‚µã‚¤ãƒ‰ãƒãƒ¼
* **å¯¾è±¡**: `communities.display_name` ã¨ `communities.description` ã®éƒ¨åˆ†ä¸€è‡´
* **å®Ÿè£…**: Supabase ã® `ilike` æ¼”ç®—å­ã‚’ä½¿ç”¨
* **çµæžœè¡¨ç¤º**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚«ãƒ¼ãƒ‰å½¢å¼ã€ä½œæˆæ—¥é †

---

### 3.4 æŠ•ç¥¨æ©Ÿèƒ½ï¼ˆUpvote / Downvoteï¼‰

1. **æ“ä½œãƒ•ãƒ­ãƒ¼**

   * æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã‚¿ãƒƒãƒ— â†’ **æŠ•ç¨¿è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»**
   * è©³ç´°ãƒšãƒ¼ã‚¸ã«ã€ŒUpvoteã€ã€ŒDownvoteã€ãƒœã‚¿ãƒ³é…ç½®
   * ã‚«ãƒ¼ãƒ‰ä¸Šã§ã‚‚çŸ¢å°ãƒœã‚¿ãƒ³ã§ç›´æŽ¥æŠ•ç¥¨å¯èƒ½ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆï¼‰
   * æŠ•ç¥¨å¾Œ `upvotes_count` / `downvotes_count` ã‚’æ›´æ–°ã—ã€Hotã‚¹ã‚³ã‚¢å†è¨ˆç®—

2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**

   * Supabase Realtime / WebSocket ã§æŠ•ç¥¨ã‚¤ãƒ™ãƒ³ãƒˆã‚’å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é…ä¿¡
   * ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯æ¥½è¦³æ›´æ–° â†’ ã‚µãƒ¼ãƒACKã§ç¢ºå®šè¡¨ç¤º

---

### 3.5 æŠ•ç¨¿è©³ç´°ãƒšãƒ¼ã‚¸

* **URLæ§‹æˆ**: `/post/[id]`
* **è¡¨ç¤ºå†…å®¹**: 
  * æŠ•ç¨¿ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ãƒ»ç”»åƒï¼ˆã‚ã‚Œã°ï¼‰
  * Upvote/Downvote ãƒœã‚¿ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆï¼‰
  * **éšŽå±¤ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤º**ï¼ˆå®Ÿè³ªç„¡åˆ¶é™éšŽå±¤ï¼‰
  * ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆï¼‰
  * é–¢é€£æŠ•ç¨¿ï¼ˆåŒã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ï¼‰

---

### 3.6 æŠ•ç¨¿ï¼ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

| æ©Ÿèƒ½   | ä»•æ§˜                                               |
| ---- | ------------------------------------------------ |
| æŠ•ç¨¿   | ã‚¿ã‚¤ãƒˆãƒ«å¿…é ˆï¼‹æœ¬æ–‡ä»»æ„ï¼‹**ç”»åƒ1æžšUploadå¯¾å¿œ**ã€‚ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã€‚        |
| ã‚³ãƒ¡ãƒ³ãƒˆ | **å®Ÿè³ªç„¡åˆ¶é™éšŽå±¤å¯¾å¿œ**ã€‚è¦ªã‚³ãƒ¡ãƒ³ãƒˆã¸ã®è¿”ä¿¡å¯èƒ½ã€‚ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã€‚            |
| ç”»åƒ   | Supabase Storageåˆ©ç”¨ã€JPEG/PNGå¯¾å¿œã€æœ€å¤§5MBã€‚         |

---

### 3.7 ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ï¼ˆæ—§ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰

#### 3.7.1 ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ©Ÿèƒ½
* **ä½œæˆ**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ–°è¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä½œæˆå¯èƒ½
* **ç®¡ç†**: ä½œæˆè€…ãŒç®¡ç†è€…ã¨ã—ã¦è¨­å®šãƒ»å‰Šé™¤æ¨©é™ã‚’æŒã¤
* **è¡¨ç¤º**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ã€ãƒ•ã‚£ãƒ¼ãƒ‰ã§é¸æŠžå¯èƒ½
* **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ç”»åƒ1æžšå¯¾å¿œï¼ˆä»»æ„ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒã‚ã‚Šï¼‰

#### 3.7.2 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
* ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãŒä»¥ä¸‹ã‚’äº‹å‰ä½œæˆï¼š
  * `news` - ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼ˆðŸ—žï¸ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒï¼‰
  * `entertainment` - ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆðŸŽ¬ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒï¼‰
  * `tech` - ãƒ†ã‚¯ãƒŽãƒ­ã‚¸ãƒ¼ï¼ˆðŸ’» ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒï¼‰
  * `sports` - ã‚¹ãƒãƒ¼ãƒ„ï¼ˆâš½ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒï¼‰
  * `gaming` - ã‚²ãƒ¼ãƒ ï¼ˆðŸŽ® ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒï¼‰

#### 3.7.3 ã‚µã‚¤ãƒ‰ãƒãƒ¼æ©Ÿèƒ½
* **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§**: å‚åŠ ä¸­ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®è¡¨ç¤º
* **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è¿½åŠ ãƒœã‚¿ãƒ³**: æ–°è¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä½œæˆç”»é¢ã¸ã®é·ç§»
* **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è©³ç´°**: ã‚¯ãƒªãƒƒã‚¯ â†’ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆæŠ•ç¨¿ä¸€è¦§ãƒ»æƒ…å ±ãƒ»è¨­å®šï¼‰

---

### 3.8 ãƒ—ãƒ­ãƒ¢ãƒ¼ãƒˆæŠ•ç¨¿ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–åºƒå‘Šï¼‰

1. **è¡¨ç¤ºä½ç½®ã¨é »åº¦**
   * åˆæœŸãƒ­ãƒ¼ãƒ‰ï¼ˆ25ä»¶ã®æŠ•ç¨¿ï¼‰ã«åºƒå‘Š1â€“2ä»¶ã‚’ãƒ©ãƒ³ãƒ€ãƒ æŒ¿å…¥
   * ã€Œã‚‚ã£ã¨èª­ã‚€ã€ã§25ä»¶è¿½åŠ å–å¾—ã”ã¨ã«åºƒå‘Š1â€“2ä»¶å†æŒ¿å…¥

2. **åºƒå‘Šã‚«ãƒ¼ãƒ‰ã®è¦‹ãŸç›®**
   * é€šå¸¸æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã¨åŒã˜å½¢å¼ã€ä¸‹éƒ¨ã« **Promoted** ãƒ©ãƒ™ãƒ«
   * èƒŒæ™¯è‰²ã‚’å¾®å¦™ã«å¤‰æ›´ï¼ˆè–„ã„ã‚°ãƒ¬ãƒ¼ï¼‰

---

### 3.9 UIæ§‹æˆï¼ˆæœ¬å®¶Redditæº–æ‹ ï¼‰

#### 3.9.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
* **ãƒ˜ãƒƒãƒ€ãƒ¼**: ãƒ­ã‚´ã€**æ¤œç´¢ãƒãƒ¼ï¼ˆä¸­å¤®ï¼‰**ã€ãƒ­ã‚°ã‚¤ãƒ³/ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
* **ã‚µã‚¤ãƒ‰ãƒãƒ¼**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è¿½åŠ ãƒœã‚¿ãƒ³ã€äººæ°—æŠ•ç¨¿ã€åºƒå‘Šæž 
* **ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: æŠ•ç¨¿ãƒ•ã‚£ãƒ¼ãƒ‰ã€æŠ•ç¨¿è©³ç´°ãƒšãƒ¼ã‚¸
* **ã‚µã‚¤ãƒ‰ãƒãƒ¼åˆ¶å¾¡**: è¡¨ç¤º/éžè¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³

#### 3.9.2 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
* **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ + ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®2ã‚«ãƒ©ãƒ 
* **ãƒ¢ãƒã‚¤ãƒ«**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯æŠ˜ã‚ŠãŸãŸã¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼

---

### 3.10 ã€Œã‚‚ã£ã¨èª­ã‚€ã€ãƒœã‚¿ãƒ³

* æ–‡è¨€: **ã€Œã‚‚ã£ã¨èª­ã‚€ã€**
* ãƒªã‚¹ãƒˆä¸‹éƒ¨å›ºå®šã€‚ã‚¿ãƒƒãƒ— â†’ æ¬¡ã®25ä»¶ï¼‹åºƒå‘Šå–å¾— â†’ ãƒªã‚¹ãƒˆã«è¿½åŠ è¡¨ç¤º

---

## 4. éžæ©Ÿèƒ½è¦ä»¶ (NFR)

| åŒºåˆ†       | è¦ä»¶                      |
| -------- | ----------------------- |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹  | åˆæœŸæç”» <3ç§’ / æ»‘ã‚‰ã‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€æŠ•ç¨¿25ä»¶ |
| åŒæœŸ       | æŠ•ç¥¨ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ P99â‰¦1ç§’          |
| å¯ç”¨æ€§      | 99.9% (Supabase+Vercel) |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£   | RLSã€OAuthã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€**bcryptãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–**      |
| ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆ | Â¥0â€“Â¥5,000/æœˆ             |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ã®æ‹¡å¼µæ€§ã€DBæ­£è¦åŒ–ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–** |

---

## 5. ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒžï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«è¨­è¨ˆï¼‰

### 5.1 communities ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create table communities (
  id serial primary key,              -- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ID
  name text not null unique,          -- internal identifier, ex: 'news'
  display_name text not null,         -- è¡¨ç¤ºå, ex: 'ãƒ‹ãƒ¥ãƒ¼ã‚¹'
  description text,                   -- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£èª¬æ˜Ž
  image_url text,                     -- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ç”»åƒURLï¼ˆä»»æ„ï¼‰
  user_id uuid references users(id) on delete set null, -- ä½œæˆè€…
  member_count int default 0,         -- ãƒ¡ãƒ³ãƒãƒ¼æ•°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  post_count int default 0,           -- æŠ•ç¨¿æ•°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  created_at timestamptz default now(),-- ä½œæˆæ—¥æ™‚
  updated_at timestamptz default now() -- æ›´æ–°æ—¥æ™‚
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
create index idx_communities_name on communities(name);
create index idx_communities_display_name on communities using gin(to_tsvector('japanese', display_name));
create index idx_communities_created_at on communities(created_at desc);
```

### 5.2 users ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create table users (
  id uuid primary key default gen_random_uuid(),  -- ãƒ¦ãƒ¼ã‚¶ãƒ¼UUID
  email text unique not null,                     -- èªè¨¼æ¸ˆã¿ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  username text unique,                           -- ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆä»»æ„ï¼‰
  password_hash text,                             -- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ï¼ˆbcryptï¼‰
  profile_image_url text,                         -- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒURL
  bio text,                                       -- è‡ªå·±ç´¹ä»‹
  karma_score int default 0,                      -- ã‚«ãƒ«ãƒžã‚¹ã‚³ã‚¢ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  email_verified boolean default false,           -- ãƒ¡ãƒ¼ãƒ«èªè¨¼çŠ¶æ…‹
  created_at timestamptz default now(),           -- ä½œæˆæ—¥æ™‚
  updated_at timestamptz default now()            -- æ›´æ–°æ—¥æ™‚
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
create index idx_users_email on users(email);
create index idx_users_username on users(username);
create index idx_users_karma_score on users(karma_score desc);
```

### 5.3 posts ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create table posts (
  id uuid primary key default gen_random_uuid(),   -- æŠ•ç¨¿UUID
  user_id uuid references users(id) on delete set null,  -- æŠ•ç¨¿è€…
  community_id int references communities(id) on delete cascade, -- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
  title text not null,                            -- ã‚¿ã‚¤ãƒˆãƒ«
  body text,                                      -- æœ¬æ–‡ï¼ˆçœç•¥å¯ï¼‰
  image_url text,                                 -- ç”»åƒURLï¼ˆçœç•¥å¯ï¼‰
  is_promoted boolean default false,              -- åºƒå‘Šãƒ•ãƒ©ã‚°
  upvotes_count int default 0,                    -- è³›æˆç¥¨æ•°
  downvotes_count int default 0,                  -- åå¯¾ç¥¨æ•°
  comments_count int default 0,                   -- ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  view_count int default 0,                       -- é–²è¦§æ•°ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  created_at timestamptz default now(),           -- ä½œæˆæ—¥æ™‚
  updated_at timestamptz default now()            -- æ›´æ–°æ—¥æ™‚
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
create index idx_posts_community_created on posts(community_id, created_at desc);
create index idx_posts_user_created on posts(user_id, created_at desc);
create index idx_posts_hot_score on posts((upvotes_count - downvotes_count) desc, created_at desc);
create index idx_posts_search on posts using gin(to_tsvector('japanese', title || ' ' || coalesce(body, '')));
create index idx_posts_promoted on posts(is_promoted, created_at desc);
```

### 5.4 comments ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create table comments (
  id uuid primary key default gen_random_uuid(),   -- ã‚³ãƒ¡ãƒ³ãƒˆUUID
  post_id uuid references posts(id) on delete cascade, -- å¯¾è±¡æŠ•ç¨¿
  parent_comment_id uuid references comments(id) on delete cascade, -- è¦ªã‚³ãƒ¡ãƒ³ãƒˆï¼ˆéšŽå±¤å¯¾å¿œï¼‰
  user_id uuid references users(id) on delete set null, -- ã‚³ãƒ¡ãƒ³ãƒˆè€…
  body text not null,                              -- ã‚³ãƒ¡ãƒ³ãƒˆæœ¬æ–‡
  upvotes_count int default 0,                     -- ã‚³ãƒ¡ãƒ³ãƒˆè³›æˆç¥¨ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  downvotes_count int default 0,                   -- ã‚³ãƒ¡ãƒ³ãƒˆåå¯¾ç¥¨ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  depth int default 0,                             -- ã‚³ãƒ¡ãƒ³ãƒˆéšŽå±¤æ·±åº¦
  created_at timestamptz default now(),            -- ä½œæˆæ—¥æ™‚
  updated_at timestamptz default now()             -- æ›´æ–°æ—¥æ™‚
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
create index idx_comments_post_created on comments(post_id, created_at desc);
create index idx_comments_parent_created on comments(parent_comment_id, created_at desc);
create index idx_comments_user_created on comments(user_id, created_at desc);
create index idx_comments_depth on comments(depth);
```

### 5.5 votes ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create table votes (
  user_id uuid references users(id) on delete cascade, -- æŠ•ç¥¨è€…
  post_id uuid references posts(id) on delete cascade, -- å¯¾è±¡æŠ•ç¨¿
  vote_type smallint not null,     -- 1=upvote, -1=downvote
  created_at timestamptz default now(), -- æŠ•ç¥¨æ—¥æ™‚
  updated_at timestamptz default now(), -- æ›´æ–°æ—¥æ™‚
  primary key (user_id, post_id)    -- é‡è¤‡æŠ•ç¥¨é˜²æ­¢
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
create index idx_votes_post_type on votes(post_id, vote_type);
create index idx_votes_user_created on votes(user_id, created_at desc);
```

### 5.6 user_communities ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰

```sql
create table user_communities (
  user_id uuid references users(id) on delete cascade,
  community_id int references communities(id) on delete cascade,
  joined_at timestamptz default now(),
  primary key (user_id, community_id)
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
create index idx_user_communities_user on user_communities(user_id);
create index idx_user_communities_community on user_communities(community_id);
```

### 5.7 Hotã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ“ãƒ¥ãƒ¼ï¼ˆä¿®æ­£ç‰ˆï¼‰

```sql
create view post_hot_scores as
select
  p.*,
  c.name as community_name,
  c.display_name as community_display_name,
  c.image_url as community_image_url,
  u.username,
  u.profile_image_url,
  ( log(greatest(abs(p.upvotes_count - p.downvotes_count),1)) / ln(10)
    + (
        case
          when (p.upvotes_count - p.downvotes_count) > 0 then 1
          when (p.upvotes_count - p.downvotes_count) < 0 then -1
          else 0
        end
      ) * ((extract(epoch from p.created_at)::bigint - 1134028003) / 45000.0)
  ) as hot_score
from posts p
left join communities c on p.community_id = c.id
left join users u on p.user_id = u.id
where p.is_promoted = false;
```

---

## 6. Hot ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é‹ç”¨ãƒ•ãƒ­ãƒ¼

1. **æŠ•ç¨¿ä½œæˆ**: `upvotes_count=0`, `downvotes_count=0`, `comments_count=0`, `created_at` ä¿å­˜
2. **æŠ•ç¥¨**: `votes` ãƒ†ãƒ¼ãƒ–ãƒ« upsert â†’ `upvotes_count` / `downvotes_count` æ›´æ–° â†’ Hotå†è¨ˆç®—
3. **ä¸€è¦§å–å¾—**: `post_hot_scores`ãƒ“ãƒ¥ãƒ¼ã‹ã‚‰Hoté™é †ã«å–å¾—
   * **ä¸Šä½3ä»¶**: ç‚Žä¸Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆé©ç”¨
   * **4ä»¶ç›®ä»¥é™**: é€šå¸¸è¡¨ç¤º
4. **å†å–å¾—**: 30ç§’æ¯Žã«è»½é‡JSONå†å–å¾— â†’ ãƒªã‚¹ãƒˆé †åºæ›´æ–°

---

## 7. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«è¨­è¨ˆåŽŸå‰‡

### 7.1 ã‚³ãƒ¼ãƒ‰è¨­è¨ˆ
* **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†é›¢**: æ©Ÿèƒ½å˜ä½ã§ã®ç‹¬ç«‹æ€§ç¢ºä¿
* **APIè¨­è¨ˆ**: RESTfulãªè¨­è¨ˆã€ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°å¯¾å¿œ
* **çŠ¶æ…‹ç®¡ç†**: Zustand/Reduxã§ã®ä¸€å…ƒç®¡ç†
* **åž‹å®‰å…¨æ€§**: TypeScriptã§ã®åŽ³å¯†ãªåž‹å®šç¾©

### 7.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
* **æ­£è¦åŒ–**: é©åˆ‡ãªæ­£è¦åŒ–ã§ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºä¿
* **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: æ¤œç´¢ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–
* **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: ã‚«ã‚¦ãƒ³ãƒˆç³»ã‚«ãƒ©ãƒ ã§ã®é«˜é€ŸåŒ–
* **ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°**: å°†æ¥çš„ãªå¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
* **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ã€RLSé©ç”¨

### 7.3 ã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆ
* **CDN**: ç”»åƒé…ä¿¡ã®é«˜é€ŸåŒ–
* **ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°**: ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯åˆ†æ•£å¯¾å¿œ
* **ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç›£è¦–ä½“åˆ¶
* **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ãƒ‡ãƒ¼ã‚¿ä¿è­·æˆ¦ç•¥

---

## 8. ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ï¼ˆ4é€±ï¼‰

| é€± | ã‚´ãƒ¼ãƒ«                            |
| - | ------------------------------ |
| 1 | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ + OAuth + DBè¨­è¨ˆ + RLS + ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é¸æŠžãƒ•ãƒ­ãƒ¼     |
| 2 | æŠ•ç¨¿/ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆéšŽå±¤å¯¾å¿œï¼‰/æŠ•ç¥¨ API + Realtime + æ¤œç´¢æ©Ÿèƒ½ |
| 3 | Reddité¢¨UI + ã‚µã‚¤ãƒ‰ãƒãƒ¼ + Hoté †ã‚½ãƒ¼ãƒˆ + ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ç”»åƒ      |
| 4 | ç‚Žä¸Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆ + ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ + æ¤œç´¢UI + Î²å…¬é–‹        |

---

## 9. ã¾ã¨ã‚

* **æœ¬å®¶Redditæº–æ‹ ã®UI**ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ä»˜ã2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰ã§é¦´æŸ“ã¿ã‚„ã™ã„æ“ä½œæ„Ÿ
* **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ + OAuth**ã§ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
* **å¿…é ˆã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é¸æŠžãƒ•ãƒ­ãƒ¼**ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Š
* **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ç”»åƒ + æ¤œç´¢æ©Ÿèƒ½**ã§è±Šå¯Œãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç™ºè¦‹ä½“é¨“
* **æŠ•ç¨¿æ¤œç´¢æ©Ÿèƒ½**ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
* **éšŽå±¤ã‚³ãƒ¡ãƒ³ãƒˆ + ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**ã§è±Šå¯Œãªè¡¨ç¾åŠ›
* **ç‚Žä¸Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆ**ã§ä¸Šä½3æŠ•ç¨¿ã‚’éš›ç«‹ãŸã›ã€Œä½•ã“ã‚Œï¼ã€æ„Ÿã‚’æ¼”å‡º
* **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«è¨­è¨ˆ**ã§å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µã«å¯¾å¿œ
* **Supabase+Vercelç„¡æ–™æž **ã§4é€±é–“é–‹ç™ºã—ã€MVPãƒ­ãƒ¼ãƒ³ãƒ
